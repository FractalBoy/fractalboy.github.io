<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        html, body {
            height: 100%;
        }
        body {
            text-align: center;
            margin-top: 200px;
        }
        #time, #action {
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-decoration: none;
        }
        #time {
            font-size: 120pt;
        }
        #action {
            font-size: 60pt;
        }
    </style>
</head>
<body>
    <div id="time">20:00</div>
    <div id="action">Press START.</div>
    <div id="buttons">
        <button onclick="startTimerHandler()">START</button>
        <button onclick="resetTimerHandler()">RESET</button>
        <button onclick="pauseTimerHandler()">PAUSE</button>
    </div>
</body>
<script>
    function init() {
        window.secs = 1200;
        window.action = "work"
    }

    function startTimerHandler() {
        if (window.state !== 0 && window.state !== 1) {
            init();
        }
        if (window.state !== 0) {
            updateTimer();
            window.timer = window.setInterval(updateTimer, 1000);
        }
    }
    function resetTimerHandler() {
        if(window.secs !== undefined) {
            init();
            displayTime();
            displayAction();
        }
    }
    function pauseTimerHandler() {
        if(window.state === 0) {
            window.timer = window.clearInterval(window.timer);
            window.state = 1;
            displayTime();
            displayAction();
        }
    }
    function displayTime() {
        var minutes = Math.floor(window.secs / 60);
        var secs = window.secs % 60;
        var s = secs+"";
        if (s.length < 2) {
            document.getElementById('time').innerHTML = minutes + ":" + "0" + secs;
        } else {
            document.getElementById('time').innerHTML = minutes + ":" + secs;
        }
    }
    function displayAction() {
         if (window.action === "work") {
             document.getElementById('action').innerHTML = "Keep working...";
         } else if (window.action === "stare") {
             document.getElementById('action').innerHTML = "Take a break and stare off to a point 20 feet away";
         }

         if(window.state !== 0) {
             document.getElementById('action').innerHTML = document.getElementById('action').innerHTML + "<br>Press START."
         }
    }
    function updateTimer() {
        if (window.secs === 0) {
            if (window.action === "work") {
                window.secs = 1200;
                window.clearInterval(window.timer);
                window.action = "stare";

            } else if (window.action === "stare") {
                window.secs = 1200;
                window.clearInterval(window.timer);
                window.action = "work";
            }
            window.state = 1;
        } else {
            window.secs--;
            window.state = 0;
        }
        displayTime();
        displayAction();
    }
</script>
</html>
